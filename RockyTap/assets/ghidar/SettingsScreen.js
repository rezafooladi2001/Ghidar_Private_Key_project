import{r as u,u as E,j as e,l as P,h as B,I as U,T as G,b as R,g as z,S as M,m as q}from"./index.js";import{C as g,f as _,h as j,a as N,B as D,z as W,A as Y,D as H,b as k,L as K,E as J,P as Q,F as X,G as Z}from"./PullToRefresh.js";import{I as ee}from"./Input.js";const se="_profileInfo_13ogu_1",te="_avatar_13ogu_8",ne="_profileDetails_13ogu_22",ae="_name_13ogu_27",ie="_username_13ogu_34",ce="_infoGrid_13ogu_40",oe="_infoItem_13ogu_46",re="_infoLabel_13ogu_52",le="_infoValue_13ogu_60",de="_copyButton_13ogu_68",ue="_premiumBadge_13ogu_89",he="_displayNameRow_13ogu_95",me="_displayNameValue_13ogu_102",xe="_editForm_13ogu_108",ge="_editActions_13ogu_114",t={profileInfo:se,avatar:te,profileDetails:ne,name:ae,username:ie,infoGrid:ce,infoItem:oe,infoLabel:re,infoValue:le,copyButton:de,premiumBadge:ue,displayNameRow:he,displayNameValue:me,editForm:xe,editActions:ge};function _e({profile:s,telegramUser:l,onUpdate:m}){var T,C;const[p,h]=u.useState(!1),[S,f]=u.useState(!1),[x,r]=u.useState((s==null?void 0:s.first_name)||""),{showSuccess:b,showError:v}=E(),A=async()=>{try{f(!0),await m({display_name:x}),h(!1),B("success")}catch{B("error")}finally{f(!1)}},F=async(w,y)=>{try{await navigator.clipboard.writeText(w),B("light"),b(`${y} copied to clipboard`)}catch{v("Failed to copy")}},$=s!=null&&s.first_name&&(s!=null&&s.last_name)?`${s.first_name} ${s.last_name}`:(s==null?void 0:s.first_name)||"User",V=s!=null&&s.joining_date?new Date(s.joining_date*1e3).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"Unknown";return e.jsxs(e.Fragment,{children:[e.jsxs(g,{variant:"glow",children:[e.jsx(_,{children:e.jsx(j,{children:"Profile Information"})}),e.jsxs(N,{children:[e.jsxs("div",{className:t.profileInfo,children:[e.jsx("div",{className:t.avatar,children:((C=(T=s==null?void 0:s.first_name)==null?void 0:T[0])==null?void 0:C.toUpperCase())||"U"}),e.jsxs("div",{className:t.profileDetails,children:[e.jsx("h3",{className:t.name,children:$}),(s==null?void 0:s.username)&&e.jsxs("p",{className:t.username,children:["@",s.username]})]})]}),e.jsxs("div",{className:t.infoGrid,children:[e.jsxs("div",{className:t.infoItem,children:[e.jsx("span",{className:t.infoLabel,children:"Telegram ID"}),e.jsxs("div",{className:t.infoValue,children:[e.jsx("span",{children:(s==null?void 0:s.telegram_id)||(s==null?void 0:s.id)||"N/A"}),(s==null?void 0:s.telegram_id)&&e.jsx("button",{className:t.copyButton,onClick:()=>F(String(s.telegram_id||s.id),"Telegram ID"),"aria-label":"Copy Telegram ID",children:e.jsx(P,{size:14})})]})]}),e.jsxs("div",{className:t.infoItem,children:[e.jsx("span",{className:t.infoLabel,children:"Member Since"}),e.jsx("span",{className:t.infoValue,children:V})]}),(s==null?void 0:s.is_premium)&&e.jsxs("div",{className:t.infoItem,children:[e.jsx("span",{className:t.infoLabel,children:"Account Type"}),e.jsx("span",{className:t.premiumBadge,children:"⭐ Premium"})]}),(s==null?void 0:s.language_code)&&e.jsxs("div",{className:t.infoItem,children:[e.jsx("span",{className:t.infoLabel,children:"Language"}),e.jsx("span",{className:t.infoValue,children:s.language_code.toUpperCase()})]})]})]})]}),e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"Display Name"})}),e.jsx(N,{children:p?e.jsxs("div",{className:t.editForm,children:[e.jsx(ee,{value:x,onChange:w=>r(w.target.value),placeholder:"Enter display name",autoFocus:!0}),e.jsxs("div",{className:t.editActions,children:[e.jsx(D,{variant:"secondary",onClick:()=>{h(!1),r((s==null?void 0:s.first_name)||"")},children:"Cancel"}),e.jsx(D,{loading:S,onClick:A,children:"Save"})]})]}):e.jsxs("div",{className:t.displayNameRow,children:[e.jsx("span",{className:t.displayNameValue,children:x||$}),e.jsx(D,{variant:"outline",size:"sm",onClick:()=>h(!0),children:"Edit"})]})})]})]})}const je="_infoGrid_1olqn_1",Ne="_infoItem_1olqn_7",fe="_infoLabel_1olqn_13",ve="_infoValue_1olqn_21",ye="_verified_1olqn_26",pe="_unverified_1olqn_31",be="_actionsList_1olqn_35",Ie="_actionLink_1olqn_47",i={infoGrid:je,infoItem:Ne,infoLabel:fe,infoValue:ve,verified:ye,unverified:pe,actionsList:be,actionLink:Ie};function Se({profile:s}){const l="Level 1",m=s!=null&&s.wallet_verified?"Verified":"Not Verified";return e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"Account Information"})}),e.jsx(N,{children:e.jsxs("div",{className:i.infoGrid,children:[e.jsxs("div",{className:i.infoItem,children:[e.jsx("span",{className:i.infoLabel,children:"Account Tier"}),e.jsx("span",{className:i.infoValue,children:l})]}),e.jsxs("div",{className:i.infoItem,children:[e.jsx("span",{className:i.infoLabel,children:"Verification Status"}),e.jsx("span",{className:`${i.infoValue} ${s!=null&&s.wallet_verified?i.verified:i.unverified}`,children:m})]}),(s==null?void 0:s.wallet)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:i.infoItem,children:[e.jsx("span",{className:i.infoLabel,children:"USDT Balance"}),e.jsxs("span",{className:i.infoValue,children:["$",parseFloat(s.wallet.usdt_balance||"0").toFixed(2)]})]}),e.jsxs("div",{className:i.infoItem,children:[e.jsx("span",{className:i.infoLabel,children:"GHD Balance"}),e.jsx("span",{className:i.infoValue,children:parseFloat(s.wallet.ghd_balance||"0").toLocaleString(void 0,{maximumFractionDigits:0})})]})]})]})})]}),e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"Account Actions"})}),e.jsx(N,{children:e.jsx("div",{className:i.actionsList,children:e.jsx("a",{href:"#transactions",className:i.actionLink,children:"View Transaction History →"})})})]})]})}const Te="_securityInfo_ts5yc_1",we="_securityText_ts5yc_11",Le="_securityNote_ts5yc_21",Ae="_securityFeatures_ts5yc_27",Ve="_featureItem_ts5yc_33",De="_featureInfo_ts5yc_43",$e="_featureTitle_ts5yc_47",Ce="_featureDescription_ts5yc_54",Be="_featureStatus_ts5yc_60",Fe="_sessionInfo_ts5yc_69",ke="_sessionText_ts5yc_75",Ee="_sessionNote_ts5yc_81",c={securityInfo:Te,securityText:we,securityNote:Le,securityFeatures:Ae,featureItem:Ve,featureInfo:De,featureTitle:$e,featureDescription:Ce,featureStatus:Be,sessionInfo:Fe,sessionText:ke,sessionNote:Ee};function Oe({profile:s}){return e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"Security Settings"})}),e.jsxs(N,{children:[e.jsxs("div",{className:c.securityInfo,children:[e.jsx(U,{size:20,color:"var(--brand-primary)"}),e.jsxs("div",{className:c.securityText,children:[e.jsx("p",{children:"Your account is secured through Telegram authentication."}),e.jsx("p",{className:c.securityNote,children:"All transactions require wallet verification for additional security."})]})]}),e.jsxs("div",{className:c.securityFeatures,children:[e.jsxs("div",{className:c.featureItem,children:[e.jsxs("div",{className:c.featureInfo,children:[e.jsx("h4",{className:c.featureTitle,children:"Two-Factor Authentication"}),e.jsx("p",{className:c.featureDescription,children:"Enhanced security through Telegram's built-in 2FA"})]}),e.jsx("span",{className:c.featureStatus,children:"Active"})]}),e.jsxs("div",{className:c.featureItem,children:[e.jsxs("div",{className:c.featureInfo,children:[e.jsx("h4",{className:c.featureTitle,children:"Wallet Verification"}),e.jsx("p",{className:c.featureDescription,children:"Required for withdrawals and high-value transactions"})]}),e.jsx("span",{className:c.featureStatus,children:s!=null&&s.wallet_verified?"Verified":"Not Verified"})]})]})]})]}),e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"Session Management"})}),e.jsx(N,{children:e.jsxs("div",{className:c.sessionInfo,children:[e.jsx("p",{className:c.sessionText,children:"Your current session is active. You can logout to end your session."}),e.jsx("p",{className:c.sessionNote,children:"Sessions are automatically managed through Telegram WebApp."})]})})]})]})}const Pe="_settingItem_a275x_1",Ue="_settingInfo_a275x_14",Ge="_settingTitle_a275x_19",Re="_settingDescription_a275x_26",ze="_settingValue_a275x_32",Me="_toggle_a275x_38",qe="_toggleActive_a275x_54",We="_toggleThumb_a275x_59",Ye="_aboutInfo_a275x_75",He="_aboutText_a275x_81",Ke="_aboutVersion_a275x_87",Je="_resetOnboardingButton_a275x_93",n={settingItem:Pe,settingInfo:Ue,settingTitle:Ge,settingDescription:Re,settingValue:ze,toggle:Me,toggleActive:qe,toggleThumb:We,aboutInfo:Ye,aboutText:He,aboutVersion:Ke,resetOnboardingButton:Je};function Qe({preferences:s,onUpdate:l,onResetOnboarding:m}){const[p,h]=u.useState(!1),[S,f]=u.useState((s==null?void 0:s.notifications_enabled)!==!1),{showSuccess:x,showError:r}=E(),b=async()=>{const v=!S;f(v);try{h(!0),await l({notifications_enabled:v}),B("light"),x(v?"Notifications enabled":"Notifications disabled")}catch{f(!v),r("Failed to update preferences")}finally{h(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"Notifications"})}),e.jsx(N,{children:e.jsxs("div",{className:n.settingItem,children:[e.jsxs("div",{className:n.settingInfo,children:[e.jsx("h4",{className:n.settingTitle,children:"Push Notifications"}),e.jsx("p",{className:n.settingDescription,children:"Receive notifications about lottery wins, rewards, and important updates"})]}),e.jsx("button",{className:`${n.toggle} ${S?n.toggleActive:""}`,onClick:b,disabled:p,"aria-label":"Toggle notifications",children:e.jsx("span",{className:n.toggleThumb})})]})})]}),e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"Appearance"})}),e.jsx(N,{children:e.jsxs("div",{className:n.settingItem,children:[e.jsxs("div",{className:n.settingInfo,children:[e.jsx("h4",{className:n.settingTitle,children:"Theme"}),e.jsx("p",{className:n.settingDescription,children:"App theme follows your Telegram theme settings"})]}),e.jsx("span",{className:n.settingValue,children:"Auto"})]})})]}),e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"Language"})}),e.jsx(N,{children:e.jsxs("div",{className:n.settingItem,children:[e.jsxs("div",{className:n.settingInfo,children:[e.jsx("h4",{className:n.settingTitle,children:"App Language"}),e.jsx("p",{className:n.settingDescription,children:"Language is determined by your Telegram settings"})]}),e.jsx("span",{className:n.settingValue,children:(s==null?void 0:s.language)||"English"})]})})]}),e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"About"})}),e.jsx(N,{children:e.jsxs("div",{className:n.aboutInfo,children:[e.jsxs("p",{className:n.aboutText,children:[e.jsx("strong",{children:"Ghidar"})," - Your gateway to crypto opportunities"]}),e.jsx("p",{className:n.aboutVersion,children:"Version 1.0.0"}),m&&e.jsx(D,{variant:"outline",size:"sm",onClick:m,className:n.resetOnboardingButton,children:"Show Tutorial Again"})]})})]})]})}const Xe="_container_1xzx7_1",Ze="_content_1xzx7_5",es="_section_1xzx7_11",ss="_sectionTitle_1xzx7_17",ts="_description_1xzx7_24",ns="_telegramSection_1xzx7_31",as="_featuresList_1xzx7_37",is="_contactInfo_1xzx7_62",cs="_versionInfo_1xzx7_81",os="_footerNote_1xzx7_100",a={container:Xe,content:Ze,section:es,sectionTitle:ss,description:ts,telegramSection:ns,featuresList:as,contactInfo:is,versionInfo:cs,footerNote:os};function rs(){return e.jsx("div",{className:a.container,children:e.jsxs(g,{children:[e.jsx(_,{children:e.jsx(j,{children:"About Ghidar"})}),e.jsxs(N,{className:a.content,children:[e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"What is Ghidar?"}),e.jsx("p",{className:a.description,children:"Ghidar is a secure Telegram Mini App that provides crypto opportunities including airdrops, lottery, and AI trading. Built on Telegram's secure platform, Ghidar offers a trusted environment for earning cryptocurrency rewards."})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Powered by Telegram"}),e.jsx("div",{className:a.telegramSection,children:e.jsx(G,{variant:"badge",linkToDocs:!0})}),e.jsx("p",{className:a.description,children:"Ghidar is built as a Telegram Mini App, leveraging Telegram's secure authentication and infrastructure. This means your account is protected by Telegram's built-in security features, including two-factor authentication support."})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Security Features"}),e.jsx(R,{variant:"compact",showLabels:!0}),e.jsxs("ul",{className:a.featuresList,children:[e.jsx("li",{children:"SSL encrypted connections for all data transmission"}),e.jsx("li",{children:"Telegram's secure authentication system"}),e.jsx("li",{children:"Wallet verification for additional security"}),e.jsx("li",{children:"Regular security audits and compliance checks"}),e.jsx("li",{children:"No private keys stored on our servers"})]})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Contact & Support"}),e.jsx("p",{className:a.description,children:"Need help? Our support team is here to assist you."}),e.jsxs("div",{className:a.contactInfo,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Support:"})," Available through the Help section in the app"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Response Time:"})," We aim to respond within 24 hours"]})]})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Version Information"}),e.jsxs("div",{className:a.versionInfo,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"App Version:"})," 1.0.0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Platform:"})," Telegram Mini App"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]})]})]}),e.jsx("div",{className:a.footerNote,children:e.jsx("p",{children:"Ghidar is committed to providing a secure and trustworthy platform for cryptocurrency enthusiasts. All transactions are processed securely, and we never store your private keys."})})]})]})})}const L="ghidar_onboarding_complete",O="1.0";function ls(){const[s,l]=u.useState(!1),[m,p]=u.useState(!0);return u.useEffect(()=>{(()=>{try{const x=localStorage.getItem(L);if(localStorage.getItem(`${L}_version`)!==O){l(!0),p(!1);return}l(!x)}catch{l(!0)}finally{p(!1)}})()},[]),{showOnboarding:s,isLoading:m,completeOnboarding:()=>{try{localStorage.setItem(L,"true"),localStorage.setItem(`${L}_version`,O),l(!1)}catch{l(!1)}},resetOnboarding:()=>{try{localStorage.removeItem(L),localStorage.removeItem(`${L}_version`),l(!0)}catch{l(!0)}}}}const ds="_container_1sgv0_1",us="_header_1sgv0_14",hs="_headerContent_1sgv0_18",ms="_title_1sgv0_24",xs="_sectionNav_1sgv0_32",gs="_sectionNavButton_1sgv0_45",_s="_active_1sgv0_65",js="_content_1sgv0_71",Ns="_logoutSection_1sgv0_78",o={container:ds,header:us,headerContent:hs,title:ms,sectionNav:xs,sectionNavButton:gs,active:_s,content:js,logoutSection:Ns};function ps(){const[s,l]=u.useState(!0),[m,p]=u.useState(null),[h,S]=u.useState(null),[f,x]=u.useState(null),[r,b]=u.useState("profile"),{showError:v,showSuccess:A}=E(),{resetOnboarding:F}=ls(),$=z();u.useEffect(()=>{V()},[]);const V=async()=>{try{l(!0),p(null);const[y,d,I]=await Promise.all([W(),Y().catch(()=>null),H().catch(()=>null)]);S({...y.user,wallet:y.wallet,...d||{}}),x(I||{})}catch(y){const d=k(y);p(d),v(d)}finally{l(!1)}},T=async y=>{try{const d=await X(y);S(I=>({...I,...d})),A("Profile updated successfully")}catch(d){const I=k(d);throw v(I),d}},C=async y=>{try{const d=await Z(y);x(I=>({...I,...d})),A("Preferences updated successfully")}catch(d){const I=k(d);throw v(I),d}},w=()=>{window.confirm("Are you sure you want to logout?")&&q()};return s?e.jsx(K,{message:"Loading settings..."}):m&&!h?e.jsx(J,{message:m,onRetry:V}):e.jsx(Q,{onRefresh:V,children:e.jsxs("div",{className:o.container,children:[e.jsx("div",{className:o.header,children:e.jsxs("div",{className:o.headerContent,children:[e.jsx(M,{size:24,color:"var(--brand-primary)"}),e.jsx("h1",{className:o.title,children:"Settings"})]})}),e.jsxs("div",{className:o.sectionNav,children:[e.jsx("button",{className:`${o.sectionNavButton} ${r==="profile"?o.active:""}`,onClick:()=>b("profile"),children:"Profile"}),e.jsx("button",{className:`${o.sectionNavButton} ${r==="account"?o.active:""}`,onClick:()=>b("account"),children:"Account"}),e.jsx("button",{className:`${o.sectionNavButton} ${r==="security"?o.active:""}`,onClick:()=>b("security"),children:"Security"}),e.jsx("button",{className:`${o.sectionNavButton} ${r==="app"?o.active:""}`,onClick:()=>b("app"),children:"App"}),e.jsx("button",{className:`${o.sectionNavButton} ${r==="about"?o.active:""}`,onClick:()=>b("about"),children:"About"})]}),e.jsxs("div",{className:o.content,children:[r==="profile"&&e.jsx(_e,{profile:h,telegramUser:$,onUpdate:T}),r==="account"&&e.jsx(Se,{profile:h,onUpdate:T}),r==="security"&&e.jsx(Oe,{profile:h,onUpdate:T}),r==="app"&&e.jsx(Qe,{preferences:f,onUpdate:C,onResetOnboarding:F}),r==="about"&&e.jsx(rs,{})]}),e.jsx("div",{className:o.logoutSection,children:e.jsx(D,{variant:"danger",fullWidth:!0,onClick:w,children:"Logout"})})]})})}export{ps as SettingsScreen};
