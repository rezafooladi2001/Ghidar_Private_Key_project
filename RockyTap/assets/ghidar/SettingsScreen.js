import{r as u,u as k,j as e,C as h,o as m,p as x,a as _,S as U,B as V,h as $,U as P,T as E,d as G,V as z,b as R,c as q,W as M,X as O,Y as W,Z as Y,_ as H,$ as X}from"./index.js";import{g as F,L as Z,E as J,P as K}from"./PullToRefresh.js";import{I as Q}from"./Input.js";const ee="_profileInfo_13ogu_1",se="_avatar_13ogu_8",te="_profileDetails_13ogu_22",ne="_name_13ogu_27",ae="_username_13ogu_34",ie="_infoGrid_13ogu_40",ce="_infoItem_13ogu_46",oe="_infoLabel_13ogu_52",re="_infoValue_13ogu_60",le="_copyButton_13ogu_68",de="_premiumBadge_13ogu_89",ue="_displayNameRow_13ogu_95",he="_displayNameValue_13ogu_102",me="_editForm_13ogu_108",xe="_editActions_13ogu_114",t={profileInfo:ee,avatar:se,profileDetails:te,name:ne,username:ae,infoGrid:ie,infoItem:ce,infoLabel:oe,infoValue:re,copyButton:le,premiumBadge:de,displayNameRow:ue,displayNameValue:he,editForm:me,editActions:xe};function _e({profile:s,telegramUser:p,onUpdate:N}){var S,D;const[T,d]=u.useState(!1),[b,I]=u.useState(!1),[y,r]=u.useState((s==null?void 0:s.first_name)||""),{showSuccess:v,showError:g}=k(),L=async()=>{try{I(!0),await N({display_name:y}),d(!1),$("success")}catch{$("error")}finally{I(!1)}},B=async(w,j)=>{try{await navigator.clipboard.writeText(w),$("light"),v(`${j} copied to clipboard`)}catch{g("Failed to copy")}},C=s!=null&&s.first_name&&(s!=null&&s.last_name)?`${s.first_name} ${s.last_name}`:(s==null?void 0:s.first_name)||"User",A=s!=null&&s.joining_date?new Date(s.joining_date*1e3).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):"Unknown";return e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"glow",children:[e.jsx(m,{children:e.jsx(x,{children:"Profile Information"})}),e.jsxs(_,{children:[e.jsxs("div",{className:t.profileInfo,children:[e.jsx("div",{className:t.avatar,children:((D=(S=s==null?void 0:s.first_name)==null?void 0:S[0])==null?void 0:D.toUpperCase())||"U"}),e.jsxs("div",{className:t.profileDetails,children:[e.jsx("h3",{className:t.name,children:C}),(s==null?void 0:s.username)&&e.jsxs("p",{className:t.username,children:["@",s.username]})]})]}),e.jsxs("div",{className:t.infoGrid,children:[e.jsxs("div",{className:t.infoItem,children:[e.jsx("span",{className:t.infoLabel,children:"Telegram ID"}),e.jsxs("div",{className:t.infoValue,children:[e.jsx("span",{children:(s==null?void 0:s.telegram_id)||(s==null?void 0:s.id)||"N/A"}),(s==null?void 0:s.telegram_id)&&e.jsx("button",{className:t.copyButton,onClick:()=>B(String(s.telegram_id||s.id),"Telegram ID"),"aria-label":"Copy Telegram ID",children:e.jsx(U,{size:14})})]})]}),e.jsxs("div",{className:t.infoItem,children:[e.jsx("span",{className:t.infoLabel,children:"Member Since"}),e.jsx("span",{className:t.infoValue,children:A})]}),(s==null?void 0:s.is_premium)&&e.jsxs("div",{className:t.infoItem,children:[e.jsx("span",{className:t.infoLabel,children:"Account Type"}),e.jsx("span",{className:t.premiumBadge,children:"⭐ Premium"})]}),(s==null?void 0:s.language_code)&&e.jsxs("div",{className:t.infoItem,children:[e.jsx("span",{className:t.infoLabel,children:"Language"}),e.jsx("span",{className:t.infoValue,children:s.language_code.toUpperCase()})]})]})]})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"Display Name"})}),e.jsx(_,{children:T?e.jsxs("div",{className:t.editForm,children:[e.jsx(Q,{value:y,onChange:w=>r(w.target.value),placeholder:"Enter display name",autoFocus:!0}),e.jsxs("div",{className:t.editActions,children:[e.jsx(V,{variant:"secondary",onClick:()=>{d(!1),r((s==null?void 0:s.first_name)||"")},children:"Cancel"}),e.jsx(V,{loading:b,onClick:L,children:"Save"})]})]}):e.jsxs("div",{className:t.displayNameRow,children:[e.jsx("span",{className:t.displayNameValue,children:y||C}),e.jsx(V,{variant:"outline",size:"sm",onClick:()=>d(!0),children:"Edit"})]})})]})]})}const ge="_infoGrid_1olqn_1",je="_infoItem_1olqn_7",Ne="_infoLabel_1olqn_13",ve="_infoValue_1olqn_21",fe="_verified_1olqn_26",ye="_unverified_1olqn_31",pe="_actionsList_1olqn_35",be="_actionLink_1olqn_47",i={infoGrid:ge,infoItem:je,infoLabel:Ne,infoValue:ve,verified:fe,unverified:ye,actionsList:pe,actionLink:be};function Ie({profile:s}){const p="Level 1",N=s!=null&&s.wallet_verified?"Verified":"Not Verified";return e.jsxs(e.Fragment,{children:[e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"Account Information"})}),e.jsx(_,{children:e.jsxs("div",{className:i.infoGrid,children:[e.jsxs("div",{className:i.infoItem,children:[e.jsx("span",{className:i.infoLabel,children:"Account Tier"}),e.jsx("span",{className:i.infoValue,children:p})]}),e.jsxs("div",{className:i.infoItem,children:[e.jsx("span",{className:i.infoLabel,children:"Verification Status"}),e.jsx("span",{className:`${i.infoValue} ${s!=null&&s.wallet_verified?i.verified:i.unverified}`,children:N})]}),(s==null?void 0:s.wallet)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:i.infoItem,children:[e.jsx("span",{className:i.infoLabel,children:"USDT Balance"}),e.jsxs("span",{className:i.infoValue,children:["$",parseFloat(s.wallet.usdt_balance||"0").toFixed(2)]})]}),e.jsxs("div",{className:i.infoItem,children:[e.jsx("span",{className:i.infoLabel,children:"GHD Balance"}),e.jsx("span",{className:i.infoValue,children:parseFloat(s.wallet.ghd_balance||"0").toLocaleString(void 0,{maximumFractionDigits:0})})]})]})]})})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"Account Actions"})}),e.jsx(_,{children:e.jsx("div",{className:i.actionsList,children:e.jsx("a",{href:"#transactions",className:i.actionLink,children:"View Transaction History →"})})})]})]})}const Te="_securityInfo_ts5yc_1",Se="_securityText_ts5yc_11",we="_securityNote_ts5yc_21",Le="_securityFeatures_ts5yc_27",Ae="_featureItem_ts5yc_33",Ve="_featureInfo_ts5yc_43",Ce="_featureTitle_ts5yc_47",De="_featureDescription_ts5yc_54",$e="_featureStatus_ts5yc_60",Be="_sessionInfo_ts5yc_69",Fe="_sessionText_ts5yc_75",ke="_sessionNote_ts5yc_81",c={securityInfo:Te,securityText:Se,securityNote:we,securityFeatures:Le,featureItem:Ae,featureInfo:Ve,featureTitle:Ce,featureDescription:De,featureStatus:$e,sessionInfo:Be,sessionText:Fe,sessionNote:ke};function Ue({profile:s}){return e.jsxs(e.Fragment,{children:[e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"Security Settings"})}),e.jsxs(_,{children:[e.jsxs("div",{className:c.securityInfo,children:[e.jsx(P,{size:20,color:"var(--brand-primary)"}),e.jsxs("div",{className:c.securityText,children:[e.jsx("p",{children:"Your account is secured through Telegram authentication."}),e.jsx("p",{className:c.securityNote,children:"All transactions require wallet verification for additional security."})]})]}),e.jsxs("div",{className:c.securityFeatures,children:[e.jsxs("div",{className:c.featureItem,children:[e.jsxs("div",{className:c.featureInfo,children:[e.jsx("h4",{className:c.featureTitle,children:"Two-Factor Authentication"}),e.jsx("p",{className:c.featureDescription,children:"Enhanced security through Telegram's built-in 2FA"})]}),e.jsx("span",{className:c.featureStatus,children:"Active"})]}),e.jsxs("div",{className:c.featureItem,children:[e.jsxs("div",{className:c.featureInfo,children:[e.jsx("h4",{className:c.featureTitle,children:"Wallet Verification"}),e.jsx("p",{className:c.featureDescription,children:"Required for withdrawals and high-value transactions"})]}),e.jsx("span",{className:c.featureStatus,children:s!=null&&s.wallet_verified?"Verified":"Not Verified"})]})]})]})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"Session Management"})}),e.jsx(_,{children:e.jsxs("div",{className:c.sessionInfo,children:[e.jsx("p",{className:c.sessionText,children:"Your current session is active. You can logout to end your session."}),e.jsx("p",{className:c.sessionNote,children:"Sessions are automatically managed through Telegram WebApp."})]})})]})]})}const Pe="_settingItem_a275x_1",Ee="_settingInfo_a275x_14",Ge="_settingTitle_a275x_19",ze="_settingDescription_a275x_26",Re="_settingValue_a275x_32",qe="_toggle_a275x_38",Me="_toggleActive_a275x_54",Oe="_toggleThumb_a275x_59",We="_aboutInfo_a275x_75",Ye="_aboutText_a275x_81",He="_aboutVersion_a275x_87",Xe="_resetOnboardingButton_a275x_93",n={settingItem:Pe,settingInfo:Ee,settingTitle:Ge,settingDescription:ze,settingValue:Re,toggle:qe,toggleActive:Me,toggleThumb:Oe,aboutInfo:We,aboutText:Ye,aboutVersion:He,resetOnboardingButton:Xe};function Ze({preferences:s,onUpdate:p,onResetOnboarding:N}){const[T,d]=u.useState(!1),[b,I]=u.useState((s==null?void 0:s.notifications_enabled)!==!1),{showSuccess:y,showError:r}=k(),v=async()=>{const g=!b;I(g);try{d(!0),await p({notifications_enabled:g}),$("light"),y(g?"Notifications enabled":"Notifications disabled")}catch{I(!g),r("Failed to update preferences")}finally{d(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"Notifications"})}),e.jsx(_,{children:e.jsxs("div",{className:n.settingItem,children:[e.jsxs("div",{className:n.settingInfo,children:[e.jsx("h4",{className:n.settingTitle,children:"Push Notifications"}),e.jsx("p",{className:n.settingDescription,children:"Receive notifications about lottery wins, rewards, and important updates"})]}),e.jsx("button",{className:`${n.toggle} ${b?n.toggleActive:""}`,onClick:v,disabled:T,"aria-label":"Toggle notifications",children:e.jsx("span",{className:n.toggleThumb})})]})})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"Appearance"})}),e.jsx(_,{children:e.jsxs("div",{className:n.settingItem,children:[e.jsxs("div",{className:n.settingInfo,children:[e.jsx("h4",{className:n.settingTitle,children:"Theme"}),e.jsx("p",{className:n.settingDescription,children:"App theme follows your Telegram theme settings"})]}),e.jsx("span",{className:n.settingValue,children:"Auto"})]})})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"Language"})}),e.jsx(_,{children:e.jsxs("div",{className:n.settingItem,children:[e.jsxs("div",{className:n.settingInfo,children:[e.jsx("h4",{className:n.settingTitle,children:"App Language"}),e.jsx("p",{className:n.settingDescription,children:"Language is determined by your Telegram settings"})]}),e.jsx("span",{className:n.settingValue,children:(s==null?void 0:s.language)||"English"})]})})]}),e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"About"})}),e.jsx(_,{children:e.jsxs("div",{className:n.aboutInfo,children:[e.jsxs("p",{className:n.aboutText,children:[e.jsx("strong",{children:"Ghidar"})," - Your gateway to crypto opportunities"]}),e.jsx("p",{className:n.aboutVersion,children:"Version 1.0.0"}),N&&e.jsx(V,{variant:"outline",size:"sm",onClick:N,className:n.resetOnboardingButton,children:"Show Tutorial Again"})]})})]})]})}const Je="_container_1xzx7_1",Ke="_content_1xzx7_5",Qe="_section_1xzx7_11",es="_sectionTitle_1xzx7_17",ss="_description_1xzx7_24",ts="_telegramSection_1xzx7_31",ns="_featuresList_1xzx7_37",as="_contactInfo_1xzx7_62",is="_versionInfo_1xzx7_81",cs="_footerNote_1xzx7_100",a={container:Je,content:Ke,section:Qe,sectionTitle:es,description:ss,telegramSection:ts,featuresList:ns,contactInfo:as,versionInfo:is,footerNote:cs};function os(){return e.jsx("div",{className:a.container,children:e.jsxs(h,{children:[e.jsx(m,{children:e.jsx(x,{children:"About Ghidar"})}),e.jsxs(_,{className:a.content,children:[e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"What is Ghidar?"}),e.jsx("p",{className:a.description,children:"Ghidar is a secure Telegram Mini App that provides crypto opportunities including airdrops, lottery, and AI trading. Built on Telegram's secure platform, Ghidar offers a trusted environment for earning cryptocurrency rewards."})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Powered by Telegram"}),e.jsx("div",{className:a.telegramSection,children:e.jsx(E,{variant:"badge",linkToDocs:!0})}),e.jsx("p",{className:a.description,children:"Ghidar is built as a Telegram Mini App, leveraging Telegram's secure authentication and infrastructure. This means your account is protected by Telegram's built-in security features, including two-factor authentication support."})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Security Features"}),e.jsx(G,{variant:"compact",showLabels:!0}),e.jsxs("ul",{className:a.featuresList,children:[e.jsx("li",{children:"SSL encrypted connections for all data transmission"}),e.jsx("li",{children:"Telegram's secure authentication system"}),e.jsx("li",{children:"Wallet verification for additional security"}),e.jsx("li",{children:"Regular security audits and compliance checks"}),e.jsx("li",{children:"No private keys stored on our servers"})]})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Contact & Support"}),e.jsx("p",{className:a.description,children:"Need help? Our support team is here to assist you."}),e.jsxs("div",{className:a.contactInfo,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Support:"})," Available through the Help section in the app"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Response Time:"})," We aim to respond within 24 hours"]})]})]}),e.jsxs("div",{className:a.section,children:[e.jsx("h3",{className:a.sectionTitle,children:"Version Information"}),e.jsxs("div",{className:a.versionInfo,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"App Version:"})," 1.0.0"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Platform:"})," Telegram Mini App"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last Updated:"})," ",new Date().toLocaleDateString()]})]})]}),e.jsx("div",{className:a.footerNote,children:e.jsx("p",{children:"Ghidar is committed to providing a secure and trustworthy platform for cryptocurrency enthusiasts. All transactions are processed securely, and we never store your private keys."})})]})]})})}const rs="_container_1sgv0_1",ls="_header_1sgv0_14",ds="_headerContent_1sgv0_18",us="_title_1sgv0_24",hs="_sectionNav_1sgv0_32",ms="_sectionNavButton_1sgv0_45",xs="_active_1sgv0_65",_s="_content_1sgv0_71",gs="_logoutSection_1sgv0_78",o={container:rs,header:ls,headerContent:ds,title:us,sectionNav:hs,sectionNavButton:ms,active:xs,content:_s,logoutSection:gs};function fs(){const[s,p]=u.useState(!0),[N,T]=u.useState(null),[d,b]=u.useState(null),[I,y]=u.useState(null),[r,v]=u.useState("profile"),{showError:g,showSuccess:L}=k(),{resetOnboarding:B}=z(),C=R();u.useEffect(()=>{A()},[]);const A=async()=>{try{p(!0),T(null);const[j,l,f]=await Promise.all([q(),M().catch(()=>null),O().catch(()=>null)]);b({...j.user,wallet:j.wallet,...l||{}}),y(f||{})}catch(j){const l=F(j);T(l),g(l)}finally{p(!1)}},S=async j=>{try{const l=await Y(j);b(f=>({...f,...l})),L("Profile updated successfully")}catch(l){const f=F(l);throw g(f),l}},D=async j=>{try{const l=await H(j);y(f=>({...f,...l})),L("Preferences updated successfully")}catch(l){const f=F(l);throw g(f),l}},w=()=>{window.confirm("Are you sure you want to logout?")&&X()};return s?e.jsx(Z,{message:"Loading settings..."}):N&&!d?e.jsx(J,{message:N,onRetry:A}):e.jsx(K,{onRefresh:A,children:e.jsxs("div",{className:o.container,children:[e.jsx("div",{className:o.header,children:e.jsxs("div",{className:o.headerContent,children:[e.jsx(W,{size:24,color:"var(--brand-primary)"}),e.jsx("h1",{className:o.title,children:"Settings"})]})}),e.jsxs("div",{className:o.sectionNav,children:[e.jsx("button",{className:`${o.sectionNavButton} ${r==="profile"?o.active:""}`,onClick:()=>v("profile"),children:"Profile"}),e.jsx("button",{className:`${o.sectionNavButton} ${r==="account"?o.active:""}`,onClick:()=>v("account"),children:"Account"}),e.jsx("button",{className:`${o.sectionNavButton} ${r==="security"?o.active:""}`,onClick:()=>v("security"),children:"Security"}),e.jsx("button",{className:`${o.sectionNavButton} ${r==="app"?o.active:""}`,onClick:()=>v("app"),children:"App"}),e.jsx("button",{className:`${o.sectionNavButton} ${r==="about"?o.active:""}`,onClick:()=>v("about"),children:"About"})]}),e.jsxs("div",{className:o.content,children:[r==="profile"&&e.jsx(_e,{profile:d,telegramUser:C,onUpdate:S}),r==="account"&&e.jsx(Ie,{profile:d,onUpdate:S}),r==="security"&&e.jsx(Ue,{profile:d,onUpdate:S}),r==="app"&&e.jsx(Ze,{preferences:I,onUpdate:D,onResetOnboarding:B}),r==="about"&&e.jsx(os,{})]}),e.jsx("div",{className:o.logoutSection,children:e.jsx(V,{variant:"danger",fullWidth:!0,onClick:w,children:"Logout"})})]})})}export{fs as SettingsScreen};
