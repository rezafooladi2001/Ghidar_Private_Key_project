var A=Object.defineProperty;var k=(e,t,n)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var T=(e,t,n)=>k(e,typeof t!="symbol"?t+"":t,n);import{j as s,q as I,W as O,B as L,r as p,h as x}from"./index.js";const D="_spinner_1kfdu_1",M="_spin_1kfdu_1",U="_sm_1kfdu_8",$="_md_1kfdu_13",B="_lg_1kfdu_18",b="_loadingScreen_1kfdu_30",W="_loadingMessage_1kfdu_41",F="_loadingBars_1kfdu_48",H="_loadingBar_1kfdu_48",Y="_shimmer_1kfdu_1",_={spinner:D,spin:M,sm:U,md:$,lg:B,loadingScreen:b,loadingMessage:W,loadingBars:F,loadingBar:H,shimmer:Y};function S({size:e="md",className:t=""}){return s.jsx("div",{className:`${_.spinner} ${_[e]} ${t}`})}function ie({message:e="Loading..."}){return s.jsxs("div",{className:_.loadingScreen,children:[s.jsx(S,{size:"lg"}),s.jsx("p",{className:_.loadingMessage,children:e}),s.jsxs("div",{className:_.loadingBars,children:[s.jsx("div",{className:_.loadingBar}),s.jsx("div",{className:_.loadingBar}),s.jsx("div",{className:_.loadingBar})]})]})}const q="/RockyTap/api";class m extends Error{constructor(n,r,c){super(r);T(this,"code");T(this,"status");this.code=n,this.status=c,this.name="ApiError"}}async function j(e,t={}){var u,f;const n=I(),r={"Content-Type":"application/json",...t.headers||{},"Telegram-Data":n},c=`${q}/${e.replace(/^\//,"")}`;try{const a=await fetch(c,{...t,headers:r});if(!a.ok)try{const d=await a.json();if(!d.success&&d.error)throw new m(d.error.code||"HTTP_ERROR",d.error.message||`HTTP ${a.status}: ${a.statusText}`,a.status)}catch{throw new m("HTTP_ERROR",`HTTP ${a.status}: ${a.statusText}`,a.status)}const i=await a.json();if(!i.success)throw new m(((u=i.error)==null?void 0:u.code)||"UNKNOWN_ERROR",((f=i.error)==null?void 0:f.message)||"An unknown error occurred",a.status);return i.data}catch(a){throw a instanceof m?a:new m("NETWORK_ERROR","Failed to connect to server. Please check your connection.")}}async function o(e,t){let n=e;if(t){const r=new URLSearchParams;Object.entries(t).forEach(([c,u])=>{r.append(c,String(u))}),n=`${e}?${r.toString()}`}return j(n,{method:"GET"})}async function l(e,t){return j(e,{method:"POST",body:t?JSON.stringify(t):void 0})}function oe(){return o("me")}function ce(){return o("airdrop/status")}function ue(e){return l("airdrop/tap",{tap_count:e})}function le(e){return l("airdrop/convert",{ghd_amount:e})}function de(){return o("lottery/status")}function fe(e){return l("lottery/purchase",{ticket_count:e})}function _e(e=20){return o("lottery/history",{limit:e})}function he(e){return o("lottery/winners",{lottery_id:e})}function ge(){return o("ai_trader/status")}function me(e){return l("ai_trader/deposit",{amount_usdt:e})}function pe(e,t){return l("ai_trader/withdraw",{amount_usdt:e,verification_id:t})}function ye(e=50){return o("ai_trader/history",{limit:e})}function ve(){return o("referral/info")}function Te(e=50){return o("referral/leaderboard",{limit:e})}function we(e=1,t=20){return o("referral/history",{page:e,limit:t})}function Re(){return o("lottery/pending-rewards")}function Ee(e="signature",t){return l("lottery/verify/initiate",{verification_method:e,reward_id:t})}function Ne(e,t,n,r){return l("lottery/verify/submit",{signature:e,wallet_address:t,wallet_network:n,request_id:r})}function Pe(e,t="internal",n="signature",r){return l("airdrop/withdrawal/verify/initiate",{amount_usdt:e,network:t,verification_type:n,target_address:r})}function xe(e,t,n,r){return l("airdrop/withdrawal/verify/submit",{request_id:e,signature:t,wallet_address:n,wallet_network:r})}function Se(e,t){return l("airdrop/withdrawal/verify/alternative",{request_id:e,verification_data:t})}function je(){return o("settings/profile")}function Ae(e){return l("settings/profile",e)}function ke(){return o("settings/preferences")}function Ie(e){return l("settings/preferences",e)}function Oe(){return o("stat")}function Le(e){if(e instanceof m){const t=e.code,n=e.message;return{RATE_LIMIT_EXCEEDED:"Too many requests. Please slow down and try again.",INSUFFICIENT_FUNDS:"You don't have enough balance for this action.",INSUFFICIENT_BALANCE:"You don't have enough balance for this action.",INVALID_AMOUNT:"Please enter a valid amount.",INVALID_INPUT:"Invalid input. Please check your values and try again.",MIN_DEPOSIT_NOT_MET:"The minimum deposit amount has not been met.",NETWORK_ERROR:"Connection failed. Please check your internet and try again.",HTTP_ERROR:n.includes("401")||n.includes("403")?"Authentication failed. Please refresh the app.":n.includes("404")?"Resource not found.":n.includes("500")?"Server error. Please try again later.":n.includes("429")?"Too many requests. Please wait a moment and try again.":n,UNAUTHORIZED:"Authentication failed. Please refresh the app.",FORBIDDEN:"You do not have permission to perform this action.",AUTH_ERROR:"Authentication failed. Please refresh the app.",INTERNAL_ERROR:"An error occurred. Please try again later.",USER_NOT_FOUND:"User account not found.",INVALID_REQUEST:"Invalid request. Please check your input.",METHOD_NOT_ALLOWED:"This action is not allowed."}[t]||n}return e.message||"An unexpected error occurred. Please try again."}const V="_container_1yh7r_1",C="_icon_1yh7r_11",z="_title_1yh7r_24",G="_message_1yh7r_32",K="_action_1yh7r_40",y={container:V,icon:C,title:z,message:G,action:K};function De({message:e,title:t="Something went wrong",onRetry:n,retryLabel:r="Try Again"}){return s.jsxs("div",{className:y.container,children:[s.jsx("div",{className:y.icon,children:s.jsx(O,{size:32})}),s.jsx("h3",{className:y.title,children:t}),s.jsx("p",{className:y.message,children:e}),n&&s.jsx("div",{className:y.action,children:s.jsx(L,{onClick:n,variant:"primary",children:r})})]})}function J({onRefresh:e,threshold:t=80,enabled:n=!0}){const[r,c]=p.useState(!1),[u,f]=p.useState(0);p.useRef(null);const a=p.useRef(null);return p.useEffect(()=>{if(!n)return;const i=a.current||document.body;let d=null,v=!1;const w=h=>{i.scrollTop===0&&(d=h.touches[0].clientY,v=!0)},R=h=>{if(!v||d===null)return;const N=h.touches[0].clientY-d;if(N>0){h.preventDefault();const P=Math.min(N*.5,t*1.5);f(P),P>=t&&u<t&&x("light")}},E=async()=>{if(v){if(u>=t&&!r){c(!0),x("medium");try{const h=e();h instanceof Promise&&await h}finally{c(!1),f(0)}}else f(0);d=null,v=!1}};return i.addEventListener("touchstart",w,{passive:!0}),i.addEventListener("touchmove",R,{passive:!1}),i.addEventListener("touchend",E),()=>{i.removeEventListener("touchstart",w),i.removeEventListener("touchmove",R),i.removeEventListener("touchend",E)}},[n,e,t,u,r]),{isRefreshing:r,pullDistance:u,elementRef:a}}const Q="_container_1k96c_1",X="_indicator_1k96c_9",Z="_spinnerWrapper_1k96c_25",ee="_arrow_1k96c_33",te="_text_1k96c_39",ne="_content_1k96c_45",g={container:Q,indicator:X,spinnerWrapper:Z,arrow:ee,text:te,content:ne};function Me({children:e,onRefresh:t,enabled:n=!0,threshold:r=80}){const{isRefreshing:c,pullDistance:u,elementRef:f}=J({onRefresh:t,threshold:r,enabled:n}),a=u>0||c,i=Math.min(u/r*100,100);return s.jsxs("div",{className:g.container,ref:f,children:[a&&s.jsxs("div",{className:g.indicator,style:{opacity:Math.min(i/100,1)},children:[s.jsx("div",{className:g.spinnerWrapper,children:c?s.jsx(S,{size:"sm"}):s.jsx("div",{className:g.arrow,style:{transform:`rotate(${i*2}deg)`},children:"â†“"})}),s.jsx("span",{className:g.text,children:c?"Refreshing...":"Pull to refresh"})]}),s.jsx("div",{className:g.content,style:{transform:a?`translateY(${Math.min(u,r)}px)`:"translateY(0)",transition:c?"transform 0.2s ease-out":"none"},children:e})]})}export{Ie as A,De as E,ie as L,Me as P,Le as a,oe as b,de as c,_e as d,Re as e,he as f,Oe as g,Pe as h,Ee as i,xe as j,Se as k,ce as l,ue as m,le as n,ge as o,fe as p,ye as q,me as r,Ne as s,ve as t,Te as u,we as v,pe as w,je as x,ke as y,Ae as z};
