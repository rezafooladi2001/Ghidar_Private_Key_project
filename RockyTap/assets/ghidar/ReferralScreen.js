import{r as i,u as T,j as s,R as E,d as $,H as F,k as A,l as H,h as V}from"./index.js";import{v as z,b as j,x as W,y as G,L as U,E as M,P,C as o,f as d,h as l,a as c,B as N}from"./PullToRefresh.js";import{E as I}from"./EmptyState.js";const B="_container_r7y6n_1",Y="_fadeIn_r7y6n_1",q="_tabs_r7y6n_15",J="_tab_r7y6n_15",K="_active_r7y6n_46",O="_tabContent_r7y6n_52",Q="_linkWrapper_r7y6n_59",X="_referralLink_r7y6n_66",Z="_linkHint_r7y6n_80",ss="_statsGrid_r7y6n_88",es="_statCard_r7y6n_94",as="_statIcon_r7y6n_102",rs="_statValue_r7y6n_107",ts="_statLabel_r7y6n_114",ns="_rewardsList_r7y6n_123",is="_rewardItem_r7y6n_130",os="_rewardInfo_r7y6n_139",cs="_rewardAmount_r7y6n_145",ds="_rewardSource_r7y6n_152",ls="_rewardDate_r7y6n_158",ms="_commissionList_r7y6n_164",hs="_commissionItem_r7y6n_170",_s="_commissionType_r7y6n_179",ys="_commissionRate_r7y6n_185",xs="_leaderboardList_r7y6n_192",js="_leaderboardItem_r7y6n_198",bs="_leaderboardRank_r7y6n_207",fs="_rank1_r7y6n_216",us="_rank2_r7y6n_220",vs="_rank3_r7y6n_224",ps="_leaderboardInfo_r7y6n_228",Ns="_leaderboardName_r7y6n_236",Is="_leaderboardUsername_r7y6n_245",Ls="_leaderboardStats_r7y6n_252",ws="_leaderboardEarned_r7y6n_257",ks="_historyList_r7y6n_265",gs="_historyItem_r7y6n_271",Rs="_historyInfo_r7y6n_280",Cs="_historyAmount_r7y6n_286",Ss="_historyDetails_r7y6n_293",Ds="_historyDate_r7y6n_299",e={container:B,fadeIn:Y,tabs:q,tab:J,active:K,tabContent:O,linkWrapper:Q,referralLink:X,linkHint:Z,statsGrid:ss,statCard:es,statIcon:as,statValue:rs,statLabel:ts,rewardsList:ns,rewardItem:is,rewardInfo:os,rewardAmount:cs,rewardSource:ds,rewardDate:ls,commissionList:ms,commissionItem:hs,commissionType:_s,commissionRate:ys,leaderboardList:xs,leaderboardItem:js,leaderboardRank:bs,rank1:fs,rank2:us,rank3:vs,leaderboardInfo:ps,leaderboardName:Ns,leaderboardUsername:Is,leaderboardStats:Ls,leaderboardEarned:ws,historyList:ks,historyItem:gs,historyInfo:Rs,historyAmount:Cs,historyDetails:Ss,historyDate:Ds};function Fs(){const[t,L]=i.useState(null),[_,w]=i.useState([]),[y,k]=i.useState([]),[g,b]=i.useState(!0),[f,u]=i.useState(null),[n,m]=i.useState("info"),[v,p]=i.useState(!1),{showError:h,showSuccess:R}=T();i.useEffect(()=>{x()},[]),i.useEffect(()=>{n==="leaderboard"&&_.length===0?C():n==="history"&&y.length===0&&S()},[n]);const x=async()=>{try{b(!0),u(null);const a=await z();L(a)}catch(a){const r=j(a);u(r),h(r)}finally{b(!1)}},C=async()=>{try{const a=await W(50);w(a.leaderboard)}catch(a){const r=j(a);h(r)}},S=async()=>{try{const a=await G(1,20);k(a.rewards)}catch(a){const r=j(a);h(r)}},D=async()=>{if(t)try{V("light"),await navigator.clipboard.writeText(t.referral_link),p(!0),R("Referral link copied!"),setTimeout(()=>p(!1),2e3)}catch{h("Failed to copy link. Please try again.")}};return g?s.jsx(U,{message:"Loading referral info..."}):f?s.jsx(M,{message:f,onRetry:x}):t?s.jsx(P,{onRefresh:x,children:s.jsxs("div",{className:e.container,children:[s.jsxs("div",{className:e.tabs,children:[s.jsxs("button",{className:`${e.tab} ${n==="info"?e.active:""}`,onClick:()=>m("info"),children:[s.jsx(E,{size:16}),s.jsx("span",{children:"Invite"})]}),s.jsxs("button",{className:`${e.tab} ${n==="leaderboard"?e.active:""}`,onClick:()=>m("leaderboard"),children:[s.jsx($,{size:16}),s.jsx("span",{children:"Top"})]}),s.jsxs("button",{className:`${e.tab} ${n==="history"?e.active:""}`,onClick:()=>m("history"),children:[s.jsx(F,{size:16}),s.jsx("span",{children:"Rewards"})]})]}),n==="info"&&s.jsxs("div",{className:e.tabContent,children:[s.jsxs(o,{variant:"glow",children:[s.jsx(d,{children:s.jsxs(l,{children:[s.jsx(A,{size:20,color:"var(--brand-primary)"}),"Your Referral Link"]})}),s.jsxs(c,{children:[s.jsxs("div",{className:e.linkWrapper,children:[s.jsx("code",{className:e.referralLink,children:t.referral_link}),s.jsx(N,{onClick:D,variant:v?"success":"primary",size:"sm",children:v?s.jsx(s.Fragment,{children:"âœ“ Copied"}):s.jsxs(s.Fragment,{children:[s.jsx(H,{size:16})," Copy"]})})]}),s.jsx("p",{className:e.linkHint,children:"Share this link with friends. Earn USDT when they deposit!"})]})]}),s.jsxs("div",{className:e.statsGrid,children:[s.jsx(o,{variant:"elevated",padding:"sm",children:s.jsx(c,{children:s.jsxs("div",{className:e.statCard,children:[s.jsx("div",{className:e.statIcon,children:"ðŸ‘¤"}),s.jsx("div",{className:e.statValue,children:t.stats.direct_referrals}),s.jsx("div",{className:e.statLabel,children:"Direct"})]})})}),s.jsx(o,{variant:"elevated",padding:"sm",children:s.jsx(c,{children:s.jsxs("div",{className:e.statCard,children:[s.jsx("div",{className:e.statIcon,children:"ðŸ‘¥"}),s.jsx("div",{className:e.statValue,children:t.stats.indirect_referrals}),s.jsx("div",{className:e.statLabel,children:"Indirect"})]})})}),s.jsx(o,{variant:"elevated",padding:"sm",children:s.jsx(c,{children:s.jsxs("div",{className:e.statCard,children:[s.jsx("div",{className:e.statIcon,children:"ðŸ’°"}),s.jsxs("div",{className:e.statValue,children:["$",parseFloat(t.stats.total_rewards_usdt).toFixed(2)]}),s.jsx("div",{className:e.statLabel,children:"Earned"})]})})})]}),t.recent_rewards.length>0&&s.jsxs(o,{variant:"elevated",children:[s.jsx(d,{children:s.jsx(l,{children:"Recent Rewards"})}),s.jsxs(c,{children:[s.jsx("div",{className:e.rewardsList,children:t.recent_rewards.slice(0,5).map((a,r)=>s.jsxs("div",{className:e.rewardItem,children:[s.jsxs("div",{className:e.rewardInfo,children:[s.jsxs("span",{className:e.rewardAmount,children:["+$",parseFloat(a.amount_usdt).toFixed(2)]}),s.jsxs("span",{className:e.rewardSource,children:["L",a.level," â€¢ ",a.source_type.replace("_"," ")]})]}),s.jsx("span",{className:e.rewardDate,children:new Date(a.created_at).toLocaleDateString()})]},r))}),s.jsx(N,{variant:"outline",fullWidth:!0,onClick:()=>m("history"),children:"View All Rewards â†’"})]})]}),s.jsxs(o,{children:[s.jsx(d,{children:s.jsx(l,{children:"Commission Rates"})}),s.jsx(c,{children:s.jsxs("div",{className:e.commissionList,children:[s.jsxs("div",{className:e.commissionItem,children:[s.jsx("span",{className:e.commissionType,children:"Wallet Deposit"}),s.jsx("span",{className:e.commissionRate,children:"5% L1 â€¢ 2% L2"})]}),s.jsxs("div",{className:e.commissionItem,children:[s.jsx("span",{className:e.commissionType,children:"AI Trader Deposit"}),s.jsx("span",{className:e.commissionRate,children:"7% L1 â€¢ 3% L2"})]}),s.jsxs("div",{className:e.commissionItem,children:[s.jsx("span",{className:e.commissionType,children:"Lottery Purchase"}),s.jsx("span",{className:e.commissionRate,children:"3% L1 â€¢ 1% L2"})]})]})})]})]}),n==="leaderboard"&&s.jsx("div",{className:e.tabContent,children:s.jsxs(o,{variant:"elevated",children:[s.jsx(d,{children:s.jsx(l,{children:"Top Referrers"})}),s.jsx(c,{children:_.length===0?s.jsx(I,{icon:"ðŸ“Š",message:"No leaderboard data available yet."}):s.jsx("div",{className:e.leaderboardList,children:_.map((a,r)=>s.jsxs("div",{className:e.leaderboardItem,children:[s.jsx("div",{className:`${e.leaderboardRank} ${r<3?e[`rank${r+1}`]:""}`,children:r<3?["ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰"][r]:`#${r+1}`}),s.jsxs("div",{className:e.leaderboardInfo,children:[s.jsxs("div",{className:e.leaderboardName,children:[a.first_name,a.username&&s.jsxs("span",{className:e.leaderboardUsername,children:["@",a.username]})]}),s.jsxs("div",{className:e.leaderboardStats,children:[a.direct_referrals," referrals"]})]}),s.jsxs("div",{className:e.leaderboardEarned,children:["$",parseFloat(a.total_rewards_usdt).toFixed(2)]})]},a.user_id))})})]})}),n==="history"&&s.jsx("div",{className:e.tabContent,children:s.jsxs(o,{variant:"elevated",children:[s.jsx(d,{children:s.jsx(l,{children:"Reward History"})}),s.jsx(c,{children:y.length===0?s.jsx(I,{icon:"ðŸ“œ",message:"No referral rewards yet. Share your link to earn!"}):s.jsx("div",{className:e.historyList,children:y.map((a,r)=>s.jsxs("div",{className:e.historyItem,children:[s.jsxs("div",{className:e.historyInfo,children:[s.jsxs("div",{className:e.historyAmount,children:["+$",parseFloat(a.amount_usdt).toFixed(2)]}),s.jsxs("div",{className:e.historyDetails,children:["Level ",a.level," â€¢ ",a.source_type.replace("_"," ")]})]}),s.jsx("div",{className:e.historyDate,children:new Date(a.created_at).toLocaleDateString()})]},r))})})]})})]})}):null}export{Fs as ReferralScreen};
